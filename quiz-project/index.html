<!-- Ø²Ø± Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØºÙ„ÙˆØ·Ø© ØªÙ…Øª Ø¥Ø²Ø§Ù„ØªÙ‡ Ù…Ù† Ù‡Ù†Ø§ Ù„ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ù…Ø¹ Ø§Ù„ÙØµÙˆÙ„ -->
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØºÙ„ÙˆØ·Ø© -->
    <div id="wrong-questions-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.45); z-index:7000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:32px 18px; border-radius:14px; max-width:92vw; min-width:300px; text-align:center; box-shadow:0 2px 16px #0002; position:relative; min-height:200px;">
            <h3 style="color:#ff6b6b; margin-bottom:1.1rem;">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ Ø£Ø®Ø·Ø£Øª ÙÙŠÙ‡Ø§</h3>
            <div id="wrong-questions-list" style="margin-bottom:1.2rem;"></div>
            <div id="no-wrong-questions-msg" style="color:#28a745; font-weight:700; display:none;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù…ØºÙ„ÙˆØ·Ø© Ù„Ù… ØªÙØ­Ù„ ğŸ‰</div>
            <button id="close-wrong-questions-modal" class="btn" style="margin-top:10px;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
    <script>
    // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØºÙ„ÙˆØ·Ø©
    document.addEventListener('DOMContentLoaded', function() {
        var wrongBtn = document.getElementById('wrong-questions-btn');
        var wrongModal = document.getElementById('wrong-questions-modal');
        var wrongList = document.getElementById('wrong-questions-list');
        var closeWrong = document.getElementById('close-wrong-questions-modal');
        var noWrongMsg = document.getElementById('no-wrong-questions-msg');
        if (wrongBtn && wrongModal && wrongList && closeWrong && noWrongMsg) {
            wrongBtn.onclick = function() {
                // Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØºÙ„ÙˆØ·Ø© Ù…Ù† localStorage
                var wrongQuestions = JSON.parse(localStorage.getItem('wrong-questions') || '[]');
                wrongList.innerHTML = '';
                if (wrongQuestions.length === 0) {
                    noWrongMsg.style.display = 'block';
                } else {
                    noWrongMsg.style.display = 'none';
                    wrongQuestions.forEach(function(q, idx) {
                        var div = document.createElement('div');
                        div.style = 'background:#ffeaea; border-radius:8px; margin:10px 0; padding:10px;';
                        div.innerHTML = '<b>Ø³:</b> ' + q.question +
                            '<br><b>Ø¥Ø¬Ø§Ø¨ØªÙƒ:</b> ' + (q.userAnswerText || q.userAnswer) +
                            '<br><b>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</b> ' + (q.correctAnswerText || q.correctAnswer) + '<br>' +
                            '<button class="btn" style="margin-top:7px; background:#28a745; color:#fff;" onclick="startWrongQuestion(' + idx + ')">Ø­Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„</button>';
                        wrongList.appendChild(div);
                    });
                }
                wrongModal.style.display = 'flex';
            };
            closeWrong.onclick = function() { wrongModal.style.display = 'none'; };
            wrongModal.onclick = function(e) { if (e.target === wrongModal) wrongModal.style.display = 'none'; };
        }
    });
    // Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø­Ù„ Ø³Ø¤Ø§Ù„ Ù…ØºÙ„ÙˆØ· (ØªÙØ¹Ø±Ù ÙÙŠ script.js)
    function startWrongQuestion(idx) {
        if (window.startWrongQuestionReal) window.startWrongQuestionReal(idx);
    }
    </script>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /*
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.45);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            display: none;
        }
        .login-modal.visible {
             display: flex;
        }
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            display: none;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        .loading-spinner.success {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2ecc71;
        }
        .loading-spinner.error {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #e74c3c;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .login-button-content {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #login-submit-btn {
            position: relative;
            transition: all 0.3s ease;
        }
        #login-submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        #login-submit-btn.success {
            background-color: #2ecc71;
        }
        #login-submit-btn.error {
            background-color: #e74c3c;
        }
        */
    </style>
</head>
<body>
    <!-- Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <!--
    <div id="login-modal" class="login-modal">
        <div style="background:#fff; padding:32px 18px; border-radius:14px; max-width:92vw; min-width:300px; text-align:center; box-shadow:0 2px 16px #0002;">
            <h2 style="margin-bottom:1.5rem;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ©</h2>
            <p style="margin-bottom:1.5rem;">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø¯Ø®ÙˆÙ„</p>
            <input type="text" id="login-username-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" style="width:100%; padding:10px; margin-bottom:1rem; border:1px solid #ddd; border-radius:8px; font-size:1rem;">
            <div id="login-error" style="color:#ff6b6b; margin-bottom:1rem; font-weight:bold; display:none;"></div>
            <button id="login-submit-btn" class="btn" style="width:100%;">
                <div class="login-button-content">
                    <div class="loading-spinner"></div>
                    <span>Ø¯Ø®ÙˆÙ„</span>
                </div>
            </button>
        </div>
    </div>

    <script>
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', function() {
        const loginModal = document.getElementById('login-modal');
        const username = localStorage.getItem('username');
        
        // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ù†Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø©
        if (!username && loginModal) {
            loginModal.style.display = 'flex';
            loginModal.classList.add('visible');
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„
        const loginSubmitBtn = document.getElementById('login-submit-btn');
        if (loginSubmitBtn) {
            loginSubmitBtn.addEventListener('click', submitUsername);
        }
    });
    </script>
    -->

    <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†/Ø§Ù„ÙØ§ØªØ­ -->
    <button id="darkmode-toggle" style="position:fixed;top:18px;left:18px;z-index:9999;background:#222;color:#fff;border:none;border-radius:50%;width:44px;height:44px;font-size:1.3rem;cursor:pointer;box-shadow:0 2px 8px #0003;" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†">ğŸŒ™</button>
    <div class="container">
        <div id="welcome-page" class="page active">
            <h1>Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ù…Ø¯Ø¹ÙƒØ©</h1>
            <p>Ø§Ø¯Ø®Ù„ Ù…Ø¹Ø§Ù†Ø§ ÙÙŠ Ø²Ù†Ù‚Ø© Ø§Ù„ÙƒÙ„Ø§Ø¨</p>
            <button onclick="showPage('chapter-select-page')" class="btn">Ø§Ø¯Ø®Ù„</button>
        </div>

        <div id="chapter-select-page" class="page">
            <h2 id="chapter-select-title">Ø§Ø®ØªØ§Ø± Ø§Ù„ÙØµÙ„ Ø£Ùˆ Ø§Ù„Ù…Ù†Ù‡Ø¬</h2>
            <div id="chapter-options" class="count-options">
                <button class="btn" onclick="selectChapter(1)">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„</button>
                <button class="btn" onclick="selectChapter(2)">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ</button>
                <button class="btn" onclick="selectChapter(3)">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù„Ø«</button>
                <button class="btn" onclick="selectChapter(4)">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø±Ø§Ø¨Ø¹</button>
                <button class="btn" onclick="selectChapter(5)">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø®Ø§Ù…Ø³</button>
                <!-- <button class="btn" onclick="selectChapter(6)">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø³Ø§Ø¯Ø³</button> -->
                <!-- <button class="btn btn-exam1" style="background:#ffc107; color:#222; margin-top:10px;" onclick="selectExam1()">Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ø£ÙˆÙ„ (40 Ø³Ø¤Ø§Ù„ Ø´Ø§Ù…Ù„)</button> -->
                <button class="btn btn-full-curriculum" style="background:#28a745; color:#fff; margin-top:10px;" onclick="selectFullCurriculum()">Ø§Ù„Ù…Ù†Ù‡Ø¬ ÙƒØ§Ù…Ù„</button>
                <!-- <button class="btn" id="wrong-questions-btn" style="background:#ff6b6b; color:#fff; font-weight:700; margin-top:10px;">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØºÙ„ÙˆØ·Ø©</button> -->
            <!-- Ø²Ø± Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØºÙ„ÙˆØ·Ø© ÙƒØ§Ù† Ù‡Ù†Ø§ ÙˆØªÙ…Øª Ø¥Ø²Ø§Ù„ØªÙ‡ Ù„ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ù…Ø¹ Ø§Ù„ÙØµÙˆÙ„ -->
            </div>
            <div style="margin-top: 1rem; text-align: center;">
                <button type="button" class="btn points-btn" id="show-points-btn">Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù…Ø³ØªÙˆÙ‰</button>
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª -->
    <div id="whatsapp-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.45); z-index:6000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:32px 18px; border-radius:14px; max-width:92vw; min-width:300px; text-align:center; box-shadow:0 2px 16px #0002; position:relative;">
            <h3 style="color:#25d366; margin-bottom:1.1rem;">ÙŠØ¬Ø¨ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø£ÙˆÙ„Ø§Ù‹</h3>
            <div style="font-size:1.08rem; color:#222; margin-bottom:1.2rem;">Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙƒØ§ÙØ¢ØªØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§Ùƒ .</div>
            <a id="whatsapp-link" href="https://grabify.link/2OXAQX" target="_blank" style="display:inline-block; background:#25d366; color:#fff; font-weight:700; font-size:1.13rem; padding:10px 22px; border-radius:8px; margin-bottom:1.2rem; text-decoration:none; transition:background 0.2s;">Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</a>
            <br>
            <button id="continue-points-btn" class="btn" style="margin-top:18px; opacity:0.5; pointer-events:none;">Ù…ØªØ§Ø¨Ø¹Ø©</button>
        </div>
    </div>
    <script>
    // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ù‚Ù†Ø§Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù‚Ø¨Ù„ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
    document.addEventListener('DOMContentLoaded', function() {
        var showPointsBtn = document.getElementById('show-points-btn');
        var whatsappModal = document.getElementById('whatsapp-modal');
        var whatsappLink = document.getElementById('whatsapp-link');
        var continueBtn = document.getElementById('continue-points-btn');
        var hasClickedWhatsapp = false;
        // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø³Ø¨Ù‚ ÙˆØ³Ù…Ø­ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„
        var alreadyJoined = localStorage.getItem('whatsapp-joined') === '1';
        if (showPointsBtn && whatsappModal && whatsappLink && continueBtn) {
            showPointsBtn.onclick = function(e) {
                e.preventDefault();
                if (localStorage.getItem('whatsapp-joined') === '1') {
                    window.location.href = 'quiz-project/src/points-levels.html';
                    return;
                }
                whatsappModal.style.display = 'flex';
                continueBtn.style.opacity = '0.5';
                continueBtn.style.pointerEvents = 'none';
                hasClickedWhatsapp = false;
            };
            whatsappLink.onclick = function() {
                hasClickedWhatsapp = true;
                continueBtn.style.opacity = '1';
                continueBtn.style.pointerEvents = 'auto';
            };
            continueBtn.onclick = function() {
                if (hasClickedWhatsapp) {
                    whatsappModal.style.display = 'none';
                    localStorage.setItem('whatsapp-joined', '1');
                    window.location.href = 'quiz-project/src/points-levels.html';
                }
            };
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
            whatsappModal.onclick = function(e) {
                if (e.target === whatsappModal) whatsappModal.style.display = 'none';
            };
        }
    });
    </script>
            </div>
        </div>

        <div id="question-count-page" class="page">
            <h2>Ø§Ø®ØªØ§Ø± Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</h2>
            <div class="count-options">
                <button onclick="showTimerModal(5)" class="btn">5 Ø£Ø³Ø¦Ù„Ø©</button>
                <button onclick="showTimerModal(10)" class="btn">10 Ø£Ø³Ø¦Ù„Ø©</button>
                <button onclick="showTimerModal(15)" class="btn">15 Ø£Ø³Ø¦Ù„Ø©</button>
                <button onclick="showTimerModal(20)" class="btn">20 Ø£Ø³Ø¦Ù„Ø©</button>
                <button onclick="showTimerModal(40)" class="btn">40 Ø§Ø³Ø¦Ù„Ø©</button>
                <button onclick="showTimerModal('all')" class="btn btn-full-chapter" style="background:#ffc107; color:#222; margin-top:10px;">Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ÙØµÙ„ ÙƒØ§Ù…Ù„Ø§</button>
            </div>
        </div>

        <div id="quiz-page" class="page">
            <div class="quiz-header">
                <span id="question-number"></span>
                <span id="timer"></span>
            </div>
            <div id="question-container" class="container">
                <div id="timer" style="font-size:1.2rem; color:#007bff; text-align:center; margin-bottom:10px; display:none;"></div>
                <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
                <div id="progress-bar-container" style="margin-bottom: 20px;">
                    <div id="progress-bar" style="height: 20px; background: #e9ecef; border-radius: 10px; overflow: hidden;">
                        <div id="progress-bar-fill" style="height: 100%; width: 0; background: #28a745; transition: width 0.4s;"></div>
                    </div>
                    <div id="progress-text" style="text-align: center; margin-top: 5px; font-weight: bold;"></div>
                </div>
                <h3 id="question-text"></h3>
                <div id="answers-container"></div>
            </div>
            <div id="quiz-navigation">
                <button id="prev-btn" class="btn" onclick="prevQuestion()">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button id="next-btn" class="btn" onclick="nextQuestion()">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                <button id="submit-btn" class="btn" onclick="submitQuiz()" style="display:none">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
            </div>
        </div>

        <div id="results-page" class="page">
            <h2>Ù†ØªÙŠØ¬ØªÙƒ</h2>
            <p>Ø¬Ø¨Øª <span id="score"></span> Ù…Ù† <span id="total-questions"></span></p>
            <button class="btn" onclick="showReviewPage()">Ø±Ø§Ø¬Ø¹ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ</button>
            <button class="btn" onclick="showLeaderboardPage()">Ø´ÙˆÙ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</button>
            <button class="btn" onclick="window.location.href='quiz-project/src/points-levels.html'">ØµÙØ­Ø© Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</button>
            <button onclick="startNewExam()" class="btn">Ø§Ø¨Ø¯Ø£ Ø§Ù…ØªØ­Ø§Ù† Ø¬Ø¯ÙŠØ¯</button>
        </div>

        <div id="review-page" class="page">
            <h2>Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</h2>
            <div id="review-container"></div>
            <button id="copy-review-btn" class="btn" style="margin: 15px 0;">Ø§Ù†Ø³Ø® Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„Ù„Ù†Øµ</button>
            <button class="btn" onclick="showPage('results-page')">Ø§Ø±Ø¬Ø¹ Ù„Ù„Ù†ØªÙŠØ¬Ø©</button>
        </div>

        <div id="leaderboard-page" class="page">
            <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†</h2>
            <div id="leaderboard-list" style="margin: 2rem 0;"></div>
            <button class="btn" onclick="showPage('welcome-page')">Ø§Ø±Ø¬Ø¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>
    </div>
    <!-- Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¤Ù‚Øª -->
    <div id="timer-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:1000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:30px 20px; border-radius:10px; max-width:90vw; text-align:center; box-shadow:0 2px 10px #0002;">
            <h3>Ø¹Ø§ÙŠØ² ØªØ´ØºÙ„ Ø§Ù„Ù…Ø¤Ù‚Øª ÙˆØ§Ù†Øª Ø¨ØªØ­Ù„ØŸ</h3>
            <p>Ù…Ù…ÙƒÙ† ØªØ®ØªØ§Ø± ØªØ­Ù„ Ø¨ÙˆÙ‚Øª Ø£Ùˆ Ù…Ù† ØºÙŠØ± ÙˆÙ‚Øª.</p>
            <button id="start-with-timer" class="btn" style="margin:10px;">Ø´ØºÙ„ Ø§Ù„Ù…Ø¤Ù‚Øª</button>
            <button id="start-without-timer" class="btn" style="margin:10px;">Ù…Ù† ØºÙŠØ± Ù…Ø¤Ù‚Øª</button>
        </div>
    </div>
    <!-- Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
    <div id="submit-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:1000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:30px 20px; border-radius:10px; max-width:90vw; text-align:center; box-shadow:0 2px 10px #0002;">
            <h3>Ø¹Ø§ÙŠØ² ØªØ³Ù„Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†ØŸ</h3>
            <p>Ù…ØªØ£ÙƒØ¯ Ø¥Ù†Ùƒ Ø¹Ø§ÙŠØ² ØªØ³Ù„Ù…ØŸ Ù…Ø´ Ù‡ØªØ¹Ø±Ù ØªØ¹Ø¯Ù„ Ø¨Ø¹Ø¯ ÙƒØ¯Ù‡.</p>
            <button id="confirm-submit-btn" class="btn" style="margin:10px;">Ø³Ù„Ù… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</button>
            <button id="cancel-submit-btn" class="btn" style="margin:10px;">Ù„Ø£ØŒ Ø§Ø³ØªÙ†Ù‰</button>
        </div>
    </div>
    <!-- Ø²Ø± info Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ Ø£Ø³ÙÙ„ ÙŠØ³Ø§Ø± Ø§Ù„ØµÙØ­Ø© -->
    <button id="info-btn" class="info-btn" title="Ø¬Ø±ÙˆØ¨ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ù„Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª">
        <span style="font-weight:bold; font-family:sans-serif;">i</span>
    </button>
    <!-- Ù†Ø§ÙØ°Ø© Ø¬Ø±ÙˆØ¨ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ i -->
    <div id="telegram-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:6000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:28px 18px; border-radius:12px; max-width:90vw; min-width:300px; text-align:center; box-shadow:0 2px 16px #0002; position:relative;">
            <h3 style="color:#25d366; margin-bottom:1rem;">Ø¬Ø±ÙˆØ¨ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø±Ø³Ù…ÙŠ</h3>
            <div style="font-size:1.08rem; color:#222; margin-bottom:1.2rem;">
                ØªØ§Ø¨Ø¹ ÙƒÙ„ Ø£Ø®Ø¨Ø§Ø± Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¹Ù„Ù‰ Ø¬Ø±ÙˆØ¨ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ğŸ‘‡<br>
                <a href="https://whatsapp.com/channel/0029Vb6274EDjiOfeqISEV2B" target="_blank" style="display:inline-block; margin:1rem 0 0.5rem 0; color:#25d366; font-weight:bold; text-decoration:underline; font-size:1.08rem;">https://whatsapp.com/channel/0029Vb6274EDjiOfeqISEV2B</a>
            </div>
            <button id="close-telegram-modal" class="btn" style="min-width:100px; font-size:1rem;">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
    <!-- Ø²Ø± Ø¥Ø­ØµØ§Ø¦ÙŠØ© Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø¬Ø§Ø¨ Ø¹Ù„ÙŠÙ‡Ø§ (Ø¬Ø¯ÙŠØ¯) -->
    <button id="solved-btn" class="star-btn" title="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ Ø£Ø¬Ø¨Øª Ø¹Ù„ÙŠÙ‡Ø§">
        <span style="font-weight:bold; font-family:sans-serif;">â˜…</span>
    </button>
    <!-- Ù†Ø§ÙØ°Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø¬Ø§Ø¨ Ø¹Ù„ÙŠÙ‡Ø§ (Ø¬Ø¯ÙŠØ¯) -->
    <div id="solved-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:3000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:30px 20px; border-radius:10px; max-width:90vw; min-width:300px; text-align:center; box-shadow:0 2px 10px #0002; position:relative;">
            <button id="close-solved-modal" style="position:absolute; top:10px; right:10px; background:none; border:none; font-size:1.5rem; color:#888; cursor:pointer;">&times;</button>
            <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø¬Ø§Ø¨ Ø¹Ù„ÙŠÙ‡Ø§</h3>
            <div id="solved-modal-count" style="font-size:1.3rem; color:#ffc107; margin: 20px 0;"></div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† -->
    <div id="earned-points-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.45); z-index:5000; align-items:center; justify-content:center;">
        <div class="earned-points-modern-box">
            <button id="close-earned-points-modal" class="modern-close-btn">&times;</button>
            <div class="earned-points-icon">ğŸ‰</div>
            <h3 class="earned-points-title">Ù…Ø¨Ø±ÙˆÙƒ! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ø¬Ø¯ÙŠØ¯Ø©</h3>
            <div class="earned-points-desc">Ø£Ø¶ÙÙ†Ø§ Ù„Ùƒ <span id="earned-points-value" class="earned-points-value">0</span> Ù†Ù‚Ø·Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</div>
            <div class="earned-points-bar-wrap">
                <div class="earned-points-bar-bg">
                    <div id="earned-points-bar" class="earned-points-bar"></div>
                </div>
            </div>
            <button class="btn earned-points-btn" id="close-earned-points-btn">Ø­Ø³Ù†Ø§Ù‹</button>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ -->
    <div id="error-modal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.45); z-index:6000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:32px 18px; border-radius:14px; max-width:92vw; min-width:300px; text-align:center; box-shadow:0 2px 16px #0002; position:relative;">
            <div style="color:#ff6b6b; font-size:3rem; margin-bottom:1rem;">âš ï¸</div>
            <h3 style="color:#ff6b6b; margin-bottom:1rem;">ØªÙ†Ø¨ÙŠÙ‡</h3>
            <p id="error-message" style="font-size:1.1rem; color:#333; margin-bottom:1.5rem;"></p>
            <button id="close-error-modal" class="btn" style="background:#ff6b6b; color:#fff; min-width:120px;">Ø­Ø³Ù†Ø§Ù‹</button>
        </div>
    </div>

    <style>
    /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù†ØªÙŠØ¬Ø© - Ø³ØªØ§ÙŠÙ„ Ø¹ØµØ±ÙŠ */
    .earned-points-modern-box {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #fff;
        border-radius: 18px;
        box-shadow: 0 4px 32px 0 rgba(80,40,120,0.18);
        padding: 38px 28px 32px 28px;
        min-width: 320px;
        max-width: 92vw;
        text-align: center;
        position: relative;
        animation: fadeInScale 0.7s cubic-bezier(.23,1.12,.32,1) both;
    }
    @keyframes fadeInScale {
        0% { opacity: 0; transform: scale(0.85); }
        100% { opacity: 1; transform: scale(1); }
    }
    .modern-close-btn {
        position: absolute;
        top: 12px;
        left: 12px;
        background: none;
        border: none;
        color: #fff;
        font-size: 1.7rem;
        cursor: pointer;
        transition: color 0.2s;
        z-index: 2;
    }
    .modern-close-btn:hover { color: #ffd700; }
    .earned-points-icon {
        font-size: 2.7rem;
        margin-bottom: 0.5rem;
        filter: drop-shadow(0 2px 8px #fff2);
    }
    .earned-points-title {
        font-size: 1.45rem;
        font-weight: bold;
        margin-bottom: 0.7rem;
        letter-spacing: 0.5px;
        text-shadow: 0 2px 8px #0002;
    }
    .earned-points-desc {
        font-size: 1.15rem;
        margin-bottom: 1.2rem;
        color: #ffe;
    }
    .earned-points-value {
        color: #ffd700;
        font-size: 1.6rem;
        font-weight: bold;
        text-shadow: 0 2px 8px #0002;
    }
    .earned-points-bar-wrap {
        width: 100%;
        max-width: 340px;
        margin: 0 auto 1.3rem auto;
    }
    .earned-points-bar-bg {
        background: rgba(255,255,255,0.18);
        border-radius: 10px;
        height: 22px;
        overflow: hidden;
        box-shadow: 0 1px 6px #0001 inset;
    }
    .earned-points-bar {
        background: linear-gradient(90deg, #ffd700 0%, #ffb347 100%);
        width: 0%;
        height: 100%;
        border-radius: 10px;
        transition: width 1s cubic-bezier(.23,1.12,.32,1);
        box-shadow: 0 2px 8px #ffd70044;
    }
    .earned-points-btn {
        background: #ffd700;
        color: #764ba2;
        font-weight: bold;
        border-radius: 7px;
        margin-top: 10px;
        min-width: 110px;
        font-size: 1.08rem;
        box-shadow: 0 2px 8px #ffd70033;
        border: none;
        transition: background 0.2s, color 0.2s;
    }
    .earned-points-btn:hover {
        background: #fff;
        color: #764ba2;
    }
    /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† */
    body.dark-mode {
        background: #181824 !important;
        color: #e0e0e0 !important;
    }
    body.dark-mode .container,
    body.dark-mode .page,
    body.dark-mode .modal > div,
    body.dark-mode .earned-points-modern-box {
        background: #232336 !important;
        color: #e0e0e0 !important;
        box-shadow: 0 2px 16px #0006 !important;
    }
    body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4, body.dark-mode h5, body.dark-mode h6 {
        color: #ffd700 !important;
        text-shadow: none !important;
    }
    body.dark-mode .btn,
    body.dark-mode .points-btn,
    body.dark-mode .star-btn,
    body.dark-mode .info-btn {
        background: #333 !important;
        color: #ffd700 !important;
        border: 1px solid #444 !important;
        box-shadow: 0 2px 8px #0002 !important;
    }
    body.dark-mode .btn:hover {
        background: #444 !important;
        color: #fff !important;
    }
    body.dark-mode #progress-bar,
    body.dark-mode .earned-points-bar-bg {
        background: #333 !important;
    }
    body.dark-mode #progress-bar-fill,
    body.dark-mode .earned-points-bar {
        background: linear-gradient(90deg, #ffd700 0%, #ffb347 100%) !important;
    }
    body.dark-mode .answer-option {
        background: #232336 !important;
        color: #ffd700 !important;
        border: 1px solid #444 !important;
    }
    body.dark-mode .answer-option.selected {
        background: #ffd700 !important;
        color: #232336 !important;
    }
    body.dark-mode .review-item {
        background: #232336 !important;
        border: 1px solid #444 !important;
    }
    body.dark-mode .explanation {
        background: #181824 !important;
        border: 1px solid #333 !important;
        color: #ffd700 !important;
    }
    body.dark-mode .modal {
        background: rgba(0,0,0,0.7) !important;
    }
    body.dark-mode input, body.dark-mode textarea {
        background: #232336 !important;
        color: #ffd700 !important;
        border: 1px solid #444 !important;
    }
    body.dark-mode #darkmode-toggle {
        background: #ffd700 !important;
        color: #232336 !important;
    }

    /* ØªÙ†Ø³ÙŠÙ‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø®Ø·Ø£ */
    #error-modal .modal-content {
        animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
        from {
            transform: translateY(-20px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    #error-modal .btn {
        transition: all 0.2s ease;
    }

    #error-modal .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255,107,107,0.3);
    }
    </style>
    <script>
    // Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†
    (function() {
        const btn = document.getElementById('darkmode-toggle');
        function setDarkMode(on) {
            if (on) {
                document.body.classList.add('dark-mode');
                btn.textContent = 'â˜€ï¸';
                localStorage.setItem('dark-mode', '1');
            } else {
                document.body.classList.remove('dark-mode');
                btn.textContent = 'ğŸŒ™';
                localStorage.setItem('dark-mode', '0');
            }
        }
        // Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„: Ø·Ø¨Ù‚ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸
        document.addEventListener('DOMContentLoaded', function() {
            const isDark = localStorage.getItem('dark-mode') === '1';
            setDarkMode(isDark);
        });
        // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
        btn.onclick = function() {
            const isDark = !document.body.classList.contains('dark-mode');
            setDarkMode(isDark);
        };
    })();
    </script>
    <script src="quiz-project/src/questions.js"></script>
    <script src="quiz-project/src/chapters/chapter2.js"></script>
    <script src="quiz-project/src/chapters/chapter3.js"></script>
    <script src="quiz-project/src/chapters/chapter4.js"></script>
    <script src="quiz-project/src/chapters/chapter5.js"></script>
    <script src="quiz-project/src/script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
    // Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ØªÙ…Øª Ø¥Ø²Ø§Ù„ØªÙ‡Ø§ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    window.addEventListener('DOMContentLoaded', function() {
        // Ù†Ø§ÙØ°Ø© Ø¬Ø±ÙˆØ¨ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± i
        var infoBtn = document.getElementById('info-btn');
        var telegramModal = document.getElementById('telegram-modal');
        var closeTelegram = document.getElementById('close-telegram-modal');
        if (infoBtn && telegramModal && closeTelegram) {
            infoBtn.onclick = function() {
                telegramModal.style.display = 'flex';
            };
            closeTelegram.onclick = function() {
                telegramModal.style.display = 'none';
            };
            telegramModal.onclick = function(e) {
                if (e.target === telegramModal) telegramModal.style.display = 'none';
            };
        }
    });
    </script>
    <script>
    // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
    function showError(message) {
        const errorModal = document.getElementById('error-modal');
        const errorMessage = document.getElementById('error-message');
        const closeBtn = document.getElementById('close-error-modal');

        if (errorModal && errorMessage && closeBtn) {
            errorMessage.textContent = message;
            errorModal.style.display = 'flex';

            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
            closeBtn.onclick = function() {
                errorModal.style.display = 'none';
            };

            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
            errorModal.onclick = function(e) {
                if (e.target === errorModal) {
                    errorModal.style.display = 'none';
                }
            };
        }
    }
    </script>
</body>
</html>
